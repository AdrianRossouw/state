<div class="source-title">
  <a href="javascript:void(0)">transition-expression.coffee.md</a>
</div>

<div class="source-menu">
  <ul>
  
    
    
    <li><a href="export-static.html">export-static.coffee.md</a></li>
  
    
    
    <li><a href="index.html">index.coffee.md</a></li>
  
    
    
    <li><a href="root-state.html">root-state.coffee.md</a></li>
  
    
    
    <li><a href="state-content.html">state-content.coffee.md</a></li>
  
    
    
    <li><a href="state-event-emitter.html">state-event-emitter.coffee.md</a></li>
  
    
    
    <li><a href="state-expression.html">state-expression.coffee.md</a></li>
  
    
    
    <li><a href="state-function.html">state-function.coffee.md</a></li>
  
    
    
    <li><a href="state.html">state.coffee.md</a></li>
  
    
    
    <li><a href="transition-expression.html">transition-expression.coffee.md</a></li>
  
    
    
    <li><a href="transition.html">transition.coffee.md</a></li>
  
  </ul>
</div>

<div class="source-content">
  
    
    <div class="text">
      
    </div>
    <div class="code">
      <div class="highlight"><pre><span class="nv">state = </span><span class="nx">require</span> <span class="s1">&#39;./state-function&#39;</span>

<span class="p">{</span>
  <span class="nx">O</span>
  <span class="nx">TRANSITION_PROPERTIES</span>
  <span class="nx">TRANSITION_EXPRESSION_CATEGORIES</span>
  <span class="nx">TRANSITION_EVENT_TYPES</span>
  <span class="nx">GUARD_ACTIONS</span>
<span class="p">}</span> <span class="o">=</span>
    <span class="nx">state</span>

<span class="nv">module.exports =</span></pre></div>
    </div>
  
    
    <div class="text">
      
<h2><a href="#transition-expression">TransitionExpression</a></h2>
<p>A <code>State</code> may hold <strong>transition expressions</strong> that describe a transition that
may take place between any two given <strong>origin</strong> and <strong>target</strong> states.</p>

    </div>
    <div class="code">
      <div class="highlight"><pre><span class="k">class</span> <span class="nx">TransitionExpression</span>

  <span class="p">{</span> <span class="nx">assign</span><span class="p">,</span> <span class="nx">edit</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">O</span>

  <span class="nv">properties   = </span><span class="nx">assign</span> <span class="nx">TRANSITION_PROPERTIES</span><span class="p">,</span> <span class="kc">null</span>
  <span class="nv">categories   = </span><span class="nx">assign</span> <span class="nx">TRANSITION_EXPRESSION_CATEGORIES</span><span class="p">,</span> <span class="kc">null</span>
  <span class="nv">eventTypes   = </span><span class="nx">assign</span> <span class="nx">TRANSITION_EVENT_TYPES</span>
  <span class="nv">guardActions = </span><span class="nx">assign</span> <span class="nx">GUARD_ACTIONS</span></pre></div>
    </div>
  
    
    <div class="text">
      
<h3><a href="#transition-expression--constructor">Constructor</a></h3>

    </div>
    <div class="code">
      <div class="highlight"><pre>  <span class="nv">constructor: </span><span class="nf">( map ) -&gt;</span>
    <span class="nv">map = </span><span class="nx">interpret</span> <span class="nx">map</span> <span class="nx">unless</span> <span class="nx">map</span> <span class="k">instanceof</span> <span class="nx">TransitionExpression</span>
    <span class="nx">edit</span> <span class="s1">&#39;deep all&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">map</span></pre></div>
    </div>
  
    
    <div class="text">
      
<h3><a href="#transition-expression--private">Private functions</a></h3>
<h4><a href="#transition-expression--private--interpret">interpret</a></h4>
<p>Rewrites a plain object as a well-formed <code>TransitionExpression</code>, making the
appropriate type inferences for any shorthand notation encountered.</p>

    </div>
    <div class="code">
      <div class="highlight"><pre>  <span class="nv">interpret = </span><span class="nf">( map ) -&gt;</span>
    <span class="nv">result = </span><span class="nx">assign</span> <span class="p">{},</span> <span class="nx">properties</span><span class="p">,</span> <span class="nx">categories</span>

    <span class="k">for</span> <span class="nx">own</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">map</span>
      <span class="k">if</span> <span class="nx">key</span> <span class="k">of</span> <span class="nx">properties</span>
        <span class="nx">result</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">key</span> <span class="k">of</span> <span class="nx">categories</span>
        <span class="nx">result</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">clone</span> <span class="nx">result</span><span class="p">[</span> <span class="nx">key</span> <span class="p">],</span> <span class="nx">value</span>
      <span class="k">else</span>
        <span class="nv">category =</span>
          <span class="k">if</span> <span class="nx">key</span> <span class="k">of</span> <span class="nx">eventTypes</span>
            <span class="s1">&#39;events&#39;</span>
          <span class="k">else</span> <span class="k">if</span> <span class="nx">key</span> <span class="k">of</span> <span class="nx">guardActions</span>
            <span class="s1">&#39;guards&#39;</span>
          <span class="k">else</span> <span class="k">if</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">is</span> <span class="s1">&#39;functions&#39;</span>
            <span class="s1">&#39;methods&#39;</span>
        <span class="k">if</span> <span class="nx">category</span>
          <span class="nv">item = </span><span class="nx">result</span><span class="p">[</span> <span class="nx">category</span> <span class="p">]</span>
          <span class="nx">item</span> <span class="o">or</span> <span class="o">=</span> <span class="nx">result</span><span class="p">[</span> <span class="nx">category</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
          <span class="nx">item</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>

    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nv">events = </span><span class="nx">result</span><span class="p">.</span><span class="nx">events</span>
      <span class="nx">events</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">value</span> <span class="p">]</span> <span class="k">if</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">is</span> <span class="s1">&#39;function&#39;</span>

    <span class="nx">result</span>

</pre></div>
    </div>
  
</div>